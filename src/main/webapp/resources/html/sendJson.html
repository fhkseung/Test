<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script>
$(function() {

	//Object타입
	var user = {
		id : "bagnry",
		passwd : "1111",
		name : "김기정"
	};
	
	
	// JSON String으로 변환
	var jsonString = JSON.stringify(user);
	alert(jsonString);
		
	$.ajax({
		type : "post",
		//url : "/user/json",
		//url : "/user/json1",
		url : "/user/json2",
		cache : false,
		contentType : "application/json; charset=utf-8",
		data : jsonString,
		dataType : "json",
		success : function(data) {	//스프링에서 ResponseBody를 사용하면 data에 결과값을 자바스크립트 object타입이 반환된다. 브라우져측의 자바스크립트의 object객체와 서버측이 JSON데이터가 자동으로 형변환되서 통신되는 것이다.
			//alert(data.name);
			//alert(data.name + "," + data.age)
			alert(data.id + "," + data.name + "," + data.passwd);
		},
	    error : function(xhr, error){
	    	alert(xhr.status + ", " + error);
	    }
	});
});
</script>
</head>
<body>
	<h2>JSON 데이터 송수신</h2>
</body>
</html>